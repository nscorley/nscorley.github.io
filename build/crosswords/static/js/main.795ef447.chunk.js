(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){e.exports=n(85)},46:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),a=n(18),s=n.n(a),o=(n(44),n(46),n(12)),u=n(13),c=n(16),p=n(14),l=n(17),E=n(6),d=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={isMenuOpen:!1,isSettingsOpen:!1},n.toggleMenu=function(){return n.setState({isMenuOpen:!n.state.isMenuOpen})},n.toggleSettings=function(){return n.setState({isSettingsOpen:!n.state.isSettingsOpen})},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(E.k,{color:"dark",dark:!0,expand:"md"},i.a.createElement(E.l,{href:"/"},"Crossword Catharsis"),i.a.createElement(E.m,{onClick:this.toggleMenu}),i.a.createElement(E.c,{isOpen:this.state.isMenuOpen,navbar:!0},i.a.createElement(E.h,{className:"ml-auto",navbar:!0},i.a.createElement(E.i,null,i.a.createElement(E.j,{onClick:this.toggleSettings},"About"))))),i.a.createElement(E.d,{isOpen:this.state.isSettingsOpen,toggle:this.toggleSettings},i.a.createElement(E.g,{toggle:this.toggleSettings},"About"),i.a.createElement(E.e,null,"Made by Nate, in less than a day!"),i.a.createElement(E.f,null,i.a.createElement(E.b,{color:"primary",onClick:this.toggleSettings},"Bet")," ")))}}]),t}(i.a.Component),f=n(26),y=n.n(f),S=n(34),h=n(20),b=n(36),v=n(9),z=function(e,t){return{type:"PUZZLE_SET_SQUARE",id:e,value:t}},_=function(e,t){return{type:"PUZZLE_SET_SQUARE_IS_BLACK",id:e,isBlack:t}},D=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){n.props.puzzleSetSquare(e.target.value),n.props.nextFocus()},n.onKeyDown=function(e){switch(e.keyCode){case 8:n.props.puzzleSetSquare(""),n.props.prevFocus(),e.preventDefault();break;case 9:n.props.nextFocus(),e.preventDefault();break;case 13:n.props.toggleDoubleActiveEntry(),e.preventDefault();break;default:""!==e.target.value&&(n.props.nextFocus(),e.preventDefault())}},n.ref=i.a.createRef(),n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){this.props.active&&this.ref.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.setFocused,a=t.id,s=t.active;return i.a.createElement("div",{className:"crossword-square ".concat(this.props.black&&"black"," ").concat(this.props.entryIsActive&&"entry-is-active")},i.a.createElement("input",{type:"text",maxLength:"1",value:n||"",ref:this.ref,onKeyDown:this.onKeyDown,onChange:this.handleChange,autoFocus:s,disabled:this.props.black,autoComplete:"nah",onClick:function(){s?e.props.toggleDoubleActiveEntry():r(a)}}))}}]),t}(i.a.Component),I=Object(h.b)(function(e,t){return{value:e.puzzle.squares[t.id]}},function(e,t){return{puzzleSetSquare:function(n){return e(z(t.id,n.toUpperCase()))}}})(D),O=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).nextFocus=function(){var e=n.props.puzzleEntries[n.props.activeEntryID],t=e.squareMap.indexOf(n.props.activeSquareID),r=t<e.squareMap.length-1?t+1:null;null!==r&&n.props.puzzleSetActiveSquareID(e.squareMap[r])},n.isCorrectEntry=function(){var e=!0;return n.props.puzzleEntries[n.props.activeEntryID].squareMap.forEach(function(t,r){n.props.squares[t]!==n.props.dbEntries[n.props.activeEntryID].solution[r]&&(e=!1)}),e},n.prevFocus=function(){var e=n.props.puzzleEntries[n.props.activeEntryID],t=e.squareMap.indexOf(n.props.activeSquareID),r=t>0?t-1:null;null!==r&&n.props.puzzleSetActiveSquareID(e.squareMap[r])},n.setFocused=function(e){n.props.activeSquareID!==e&&n.props.puzzleSetActiveSquareID(e),n.props.squareToEntry[e].includes(n.props.activeEntryID)||n.props.puzzleSetActiveEntryID(n.props.squareToEntry[e][0])},n.toggleDoubleActiveEntry=function(){var e=n.props.squareToEntry[n.props.activeSquareID];if(e.length>1){var t=e.filter(function(e){return e!==n.props.activeEntryID})[0];n.props.puzzleSetActiveEntryID(t)}},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(e.squares!==this.props.squares){var n=this.props.puzzleEntries[this.props.activeEntryID];if(!n.correct&&this.isCorrectEntry()){this.props.puzzleSetEntry(this.props.activeEntryID,n.squareMap,!0);var r=!0;Object.keys(this.props.puzzleEntries).forEach(function(e){e===t.props.activeEntryID||t.props.puzzleEntries[e].correct||(r=!1)}),r&&this.props.nextGrid()}else n.correct&&!this.isCorrectEntry()&&this.props.puzzleSetEntry(this.props.activeEntryID,n.squareMap,!1)}}},{key:"render",value:function(){var e=this,t=0;return i.a.createElement("div",{className:"crossword-grid"},Object(v.a)(Array(this.props.dimensions.height)).map(function(n,r){return i.a.createElement("div",{className:"row",key:"row-".concat(r)},Object(v.a)(Array(e.props.dimensions.width)).map(function(){return i.a.createElement(I,{key:"square-".concat(t),black:e.props.isBlack[t],active:e.props.activeSquareID===t,nextFocus:e.nextFocus,prevFocus:e.prevFocus,setFocused:e.setFocused,entryIsActive:e.props.puzzleEntries[e.props.activeEntryID].squareMap.includes(t),id:t++,toggleDoubleActiveEntry:e.toggleDoubleActiveEntry})}))}))}}]),t}(i.a.Component),g=function(e){var t=e.activeEntryID,n=e.nextGrid,r=e.activeSquareID,a=e.puzzleSetActiveSquareID,s=e.puzzleSetActiveEntryID,o=e.dimensions,u=e.isBlack,c=e.squareToEntry,p=e.squares,l=e.puzzleEntries,d=e.dbEntries,f=e.puzzleSetEntry,y=e.puzzleShowEntrySolution,S=e.puzzleHideEntrySolution,h=e.solutionIsVisible,b=e.revealLetter;return i.a.createElement("div",{className:"content"},i.a.createElement("h3",null,d[t].clue),i.a.createElement("br",null),i.a.createElement(O,{puzzleEntries:l,dbEntries:d,activeEntryID:t,nextGrid:n,activeSquareID:r,puzzleSetActiveSquareID:a,dimensions:o,isBlack:u,squareToEntry:c,puzzleSetActiveEntryID:s,squares:p,puzzleSetEntry:f}),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement(E.b,{color:"secondary",onClick:h?S:y},"Solution")," ",i.a.createElement(E.b,{color:"secondary",onClick:b},"Reveal a Letter")," "),i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("h5",null,"Frequency: ",d[t].frequency)),i.a.createElement("br",null),h&&i.a.createElement(E.a,{color:"danger"},i.a.createElement("b",null,d[t].solution),i.a.createElement("br",null),"-"!==d[t].explanation&&i.a.createElement("span",null,"Per\xa0",i.a.createElement("a",{href:"https://nyxcrossword.com/",rel:"noopener noreferrer",target:"_blank"},"Bill Butler: "),d[t].explanation)))},m=n(5),T=function(e){return{type:"ADD_UNSEEN_ENTRY",id:e}},q=n(22),N=n.n(q);N.a.initializeApp({apiKey:"AIzaSyCde10omoEZL54Va1XeQoatUbP0kzQ8ycc",authDomain:"crossword-coma.firebaseapp.com",databaseURL:"https://crossword-coma.firebaseio.com",projectId:"crossword-coma",storageBucket:"crossword-coma.appspot.com",messagingSenderId:"217973495005"});var j=N.a.firestore();j.settings({timestampsInSnapshots:!0});var A=j.collection("data-by-key"),k=(N.a.auth,function(e){return{type:"DB_FETCH_FAIL",error:e}}),R=function(e,t){return Object(m.a)({type:"DB_ADD_ENTRY",id:e},t)};function U(e,t,n,r){return Object(v.a)(Array(n).keys()).map(function(t){return t+r*e})}function w(e,t,n,r){return Object(v.a)(Array(n).keys()).map(function(t){return t*e+r})}function C(e){return e[Math.floor(Math.random()*e.length)]}var Z=function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(c.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).revealLetter=function(){var e=n.props.dbEntries[n.props.activeEntryID],t=n.props.puzzleEntries[n.props.activeEntryID].squareMap,r=Math.floor(Math.random()*t.length),i=t[r];n.props.puzzleSetSquare(i,e.solution[r])},n.generateGrid=Object(S.a)(y.a.mark(function e(){var t,r,i,a,s,o,u,c,p,l,E,d;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Math.random()>=.5?(t=n.props.unseenEntries.length>0?n.props.unseenEntries:n.props.seenEntries,console.log("UNSEEN:"+t.length)):t=n.props.seenEntries.length>0?n.props.seenEntries:n.props.unseenEntries,!t.length){e.next=23;break}if(r=Math.floor(Math.random()*n.props.unseenEntries.length),i=n.props.unseenEntries[r],a=n.props.dbEntries[i],s=Math.floor(Math.random()*a.solution.length),!((o=a.solution[s])in n.props.dbSubEntries)){e.next=11;break}u=C(n.props.dbSubEntries[o]),e.next=14;break;case 11:return e.next=13,n.props.dbQuerySubstring(o);case 13:u=C(n.props.dbSubEntries[o]);case 14:c=n.props.dbEntries[u],p=a.solution.length,c.solution.length,l=c.solution.indexOf(o),E=U(p,0,a.solution.length,l),d=w(p,0,c.solution.length,s),Promise.all([n.props.puzzleSetDimensions(a.solution.length,c.solution.length),n.props.puzzleSetEntry(i,E,!1),n.props.puzzleSetEntry(u,d,!1),n.props.puzzleSetEntryMaps(i,E),n.props.puzzleSetEntryMaps(u,d),n.props.puzzleSetActiveEntryID(i),n.props.puzzleSetActiveSquareID(E[0])]).then(function(){n.props.puzzleSetIsGenerating(!1)}),e.next=24;break;case 23:console.log("Exhausted crossword quota...");case 24:case"end":return e.stop()}},e,this)})),n.nextGrid=function(){n.props.puzzleClearGrid(),n.props.removeUnseenEntry(n.props.activeEntryID),n.props.addSeenEntry(n.props.activeEntryID),n.props.puzzleSetIsGenerating(!0).then(function(){n.props.puzzleHideEntrySolution(),n.generateGrid()})},n.nextClue=function(){n.props.puzzleSetActiveEntryID(n.props.activeEntryID+1)},n}return Object(l.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dbFetchClues().then(function(){e.generateGrid()})}},{key:"render",value:function(){return i.a.createElement("div",{className:"content-container"},this.props.isFetching||this.props.isGenerating?i.a.createElement(b.RotateLoader,{color:"#007bff"}):i.a.createElement(g,{activeEntryID:this.props.activeEntryID,activeSquareID:this.props.activeSquareID,puzzleEntries:this.props.puzzleEntries,dbEntries:this.props.dbEntries,nextGrid:this.nextGrid,puzzleSetActiveSquareID:this.props.puzzleSetActiveSquareID,dimensions:this.props.dimensions,isBlack:this.props.isBlack,squareToEntry:this.props.squareToEntry,puzzleSetActiveEntryID:this.props.puzzleSetActiveEntryID,squares:this.props.squares,puzzleSetEntry:this.props.puzzleSetEntry,puzzleShowEntrySolution:this.props.puzzleShowEntrySolution,puzzleHideEntrySolution:this.props.puzzleHideEntrySolution,solutionIsVisible:this.props.solutionIsVisible,revealLetter:this.revealLetter}))}}]),t}(i.a.Component),L=Object(h.b)(function(e){var t=e.db,n=e.puzzle,r=e.trainer;return{isBlack:n.isBlack,puzzleEntries:n.entries,dbEntries:t.entries,activeEntryID:n.activeEntryID,activeSquareID:n.activeSquareID,isFetching:t.isFetching,squareToEntry:n.squareToEntry,squares:n.squares,unseenEntries:r.unseenEntries,seenEntries:r.seenEntries,dimensions:n.dimensions,isGenerating:n.isGenerating,dbSubEntries:t.subEntries,solutionIsVisible:n.solutionIsVisible}},function(e){return{dbFetchClues:function(){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return function(t){return t({type:"DB_FETCH_ENTRIES"}),A.orderBy("frequency","desc").limit(e).get().then(function(e){e.forEach(function(e){t(R(e.id,e.data())),t(T(e.id))}),t({type:"DB_FETCH_SUCCESS"})}).catch(function(e){console.log(e),t(k(e))})}}())},puzzleSetActiveEntryID:function(t){e(function(e){return{type:"PUZZLE_SET_ACTIVE_ENTRY_ID",id:e}}(t)),e({type:"PUZZLE_HIDE_ENTRY_SOLUTION"})},puzzleClearGrid:function(){return e(function(e){e({type:"PUZZLE_CLEAR_SQUARES"}),e({type:"PUZZLE_CLEAR_ENTRIES"}),e({type:"PUZZLE_CLEAR_ENTRY_MAPS"})})},puzzleSetActiveSquareID:function(t){return e(function(e){return{type:"PUZZLE_SET_ACTIVE_SQUARE_ID",id:e}}(t))},puzzleSetEntry:function(t,n,r){return e(function(e,t,n){return{type:"PUZZLE_SET_ENTRY",entryID:e,squareMap:t,correct:n}}(t,n,r))},puzzleSetDimensions:function(t,n){return e(function(e,t){return function(n){return Object(v.a)(Array(e*t)).map(function(e,t){return n(_(t,!0))}),n({type:"PUZZLE_SET_DIMENSIONS",width:e,height:t})}}(t,n))},puzzleSetIsGenerating:function(t){return e(function(e){return function(t){return new Promise(function(n,r){t({type:"PUZZLE_SET_IS_GENERATING",isGenerating:e}),n()})}}(t))},puzzleSetEntryMaps:function(t,n){return e(function(e,t){return function(n){t.forEach(function(t){n(function(e,t){return{type:"PUZZLE_MAP_SQUARE_TO_ENTRY",squareID:e,entryID:t}}(t,e)),n(_(t,!1))})}}(t,n))},removeUnseenEntry:function(t){return e(function(e){return{type:"REMOVE_UNSEEN_ENTRY",id:e}}(t))},addSeenEntry:function(t){return e(function(e){return{type:"ADD_SEEN_ENTRY",id:e}}(t))},removeSeenEntry:function(t){return e(function(e){return{type:"REMOVE_SEEN_ENTRY",id:e}}(t))},addKnownEntry:function(t){return e(function(e){return{type:"  ADD_KNOWN_ENTRY,",id:e}}(t))},removeKnownEntry:function(t){return e(function(e){return{type:"REMOVE_KNOWN_ENTRY",id:e}}(t))},puzzleSetSquare:function(t,n){return e(z(t,n.toUpperCase()))},dbQuerySubstring:function(t){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(n){return n({type:"DB_FETCH_ENTRIES"}),A.where("substrings","array-contains",e.toUpperCase()).orderBy("frequency","desc").limit(t).get().then(function(t){t.forEach(function(t){n(R(t.id,t.data())),n(function(e,t){return{type:"DB_ADD_SUBSTRING_ENTRY",id:e,sub:t}}(t.id,e)),n(T(t.id))}),n({type:"DB_FETCH_SUCCESS"})}).catch(function(e){console.log(e),n(k(e))})}}(t))},puzzleShowEntrySolution:function(){return e({type:"PUZZLE_SHOW_ENTRY_SOLUTION"})},puzzleHideEntrySolution:function(){return e({type:"PUZZLE_HIDE_ENTRY_SOLUTION"})}}})(Z),M=function(){return i.a.createElement("div",null,i.a.createElement(d,null),i.a.createElement(L,null))},B=n(15),x=n(37),F=n(38),P=n(10),Y={squares:{},activeEntryID:null,activeSquareID:null,dimensions:{},isBlack:{},squareToEntry:{},entries:{},isGenerating:!0,solutionIsVisible:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PUZZLE_SHOW_ENTRY_SOLUTION":return Object(m.a)({},e,{solutionIsVisible:!0});case"PUZZLE_HIDE_ENTRY_SOLUTION":return Object(m.a)({},e,{solutionIsVisible:!1});case"PUZZLE_CLEAR_SQUARES":return Object(m.a)({},e,{squares:[]});case"PUZZLE_CLEAR_ENTRIES":return Object(m.a)({},e,{entries:{}});case"PUZZLE_CLEAR_ENTRY_MAPS":return Object(m.a)({},e,{isBlack:{},squareToEntry:{}});case"PUZZLE_SET_SQUARE":return Object(m.a)({},e,{squares:Object(m.a)({},e.squares,Object(P.a)({},t.id,t.value))});case"PUZZLE_SET_ACTIVE_ENTRY_ID":return Object(m.a)({},e,{activeEntryID:t.id});case"PUZZLE_SET_ENTRY":return Object(m.a)({},e,{entries:Object(m.a)({},e.entries,Object(P.a)({},t.entryID,{squareMap:t.squareMap,correct:t.correct}))});case"PUZZLE_SET_ACTIVE_SQUARE_ID":return Object(m.a)({},e,{activeSquareID:t.id});case"PUZZLE_SET_DIMENSIONS":return Object(m.a)({},e,{dimensions:{width:t.width,height:t.height}});case"PUZZLE_SET_SQUARE_IS_BLACK":return Object(m.a)({},e,{isBlack:Object(m.a)({},e.isBlack,Object(P.a)({},t.id,t.isBlack))});case"PUZZLE_MAP_SQUARE_TO_ENTRY":var n=t.squareID in e.squareToEntry?Object(v.a)(e.squareToEntry[t.squareID]).concat([t.entryID]):[t.entryID];return Object(m.a)({},e,{squareToEntry:Object(m.a)({},e.squareToEntry,Object(P.a)({},t.squareID,n))});case"PUZZLE_SET_IS_GENERATING":return Object(m.a)({},e,{isGenerating:t.isGenerating});default:return e}},V={entries:{},isFetching:!0,error:null,subEntries:{}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DB_ADD_ENTRY":return Object(m.a)({},e,{entries:Object(m.a)({},e.entries,Object(P.a)({},t.id,{clue:t.clue,date:new Date(t.date),dayOfWeek:t.day_of_week,difficulty:t.difficulty,explanation:t.explanation,frequency:t.frequency,length:t.length,puzzleID:t.puzzle_id,solution:t.solution}))});case"DB_BEGIN_FETCH":return Object(m.a)({},e,{isFetching:!0});case"DB_FETCH_SUCCESS":return Object(m.a)({},e,{isFetching:!1});case"DB_FETCH_FAIL":return Object(m.a)({},e,{isFetching:!1,error:t.error});case"DB_ADD_SUBSTRING_ENTRY":var n=t.sub in e.subEntries?Object(v.a)(e.subEntries[t.sub]).concat([t.id]):[t.id];return Object(m.a)({},e,{subEntries:Object(m.a)({},e.subEntries,Object(P.a)({},t.sub,n))});default:return e}},Q={unseenEntries:[],seenEntries:[],knownEntries:[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_UNSEEN_ENTRY":return Object(m.a)({},e,{unseenEntries:Object(v.a)(e.unseenEntries).concat([t.id])});case"REMOVE_UNSEEN_ENTRY":if(e.unseenEntries.indexOf(t.id)>-1)return Object(m.a)({},e,{unseenEntries:e.unseenEntries.filter(function(e){return e!==t.id})});break;case"ADD_SEEN_ENTRY":return Object(m.a)({},e,{seenEntries:Object(v.a)(e.seenEntries).concat([t.id])});case"REMOVE_SEEN_ENTRY":if(e.seenEntries.indexOf(t.id)>-1)return Object(m.a)({},e,{seenEntries:e.seenEntries.filter(function(e){return e!==t.id})});break;case"  ADD_KNOWN_ENTRY,":return Object(m.a)({},e,{knownEntries:Object(v.a)(e.knownEntries).concat([t.id])});case"REMOVE_KNOWN_ENTRY":if(e.knownEntries.indexOf(t.id)>-1)return Object(m.a)({},e,{knownEntries:e.knownEntries.filter(function(e){return e!==t.id})});break;default:return e}},W=Object(B.combineReducers)({puzzle:G,db:H,trainer:K}),J=function(e){var t=Object(B.applyMiddleware)(F.a);return Object(B.createStore)(W,e,Object(x.composeWithDevTools)(t))}(),X=function(){return i.a.createElement(h.a,{store:J},i.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,2,1]]]);
//# sourceMappingURL=main.795ef447.chunk.js.map